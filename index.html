<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HomeGymHub</title>
  <link rel="stylesheet" href="home.css">
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    html {
      background: linear-gradient(135deg, #fff 0%, #ffe5cc 20%, #ffccaa 40%, #ff9966 60%, #ffccaa 80%, #fff 100%);
      background-size: 400% 400%;
      background-attachment: fixed;
    }
    body {
      background: transparent;
    }
  </style>
</head>
<body>
  <div class="bg-gradient"></div>
  <div id="particles"></div>

  <header class="nav">
    <div class="nav-inner">
      <div class="brand">HomeGymHub</div>
      <nav class="nav-links">
        <a href="#modules">Modules</a>
        <a href="#about">About</a>
      </nav>
      <div class="auth-actions">
        <button id="loginBtn">Log In</button>
        <button id="accountBtn" style="display:none;">Account</button>
        <button id="logoutBtn" style="display:none;">Log Out</button>
      </div>
    </div>
  </header>

  <section class="hero">
    <div class="orb orb1"></div>
    <div class="orb orb2"></div>
    <div class="hero-content">
      <h1 class="hero-title">Your Home Gym, Connected</h1>
      <p class="hero-subtitle">
        Plan, explore, and share your home gym setups seamlessly in stunning 3D.
      </p>
      <div class="hero-actions">
        <button class="btn primary" data-target="builder.html">Launch Planner</button>
        <button class="btn ghost" data-target="marketplace.html">Marketplace</button>
        <button class="btn ghost" data-target="threads.html">Community</button>
      </div>
    </div>
  </section>

  <section class="model-showcase">
    <div class="orb orb3"></div>
    <div class="model-container">
      <h2 class="model-title">Experience Your Gym in 3D</h2>
      <p class="model-subtitle">
        Rotate, zoom, and explore every angle of a professional home gym setup. 
        See how equipment fits together in real space.
      </p>
      <div class="model-viewer-wrapper">
        <model-viewer
          id="gymModel"
          src="home-gym.glb"
          alt="3D Home Gym Model"
          camera-controls
          auto-rotate
          rotation-per-second="20deg"
          touch-action="pan-y"
          min-camera-orbit="auto auto 10m"
          max-camera-orbit="auto auto 40m"
          interaction-prompt="auto"
          shadow-intensity="0.7"
          exposure="1.2"
          environment-image="neutral"
        ></model-viewer>
      </div>
      <div class="model-controls">
        <button class="control-btn active" id="toggleRotation">Auto Rotate: ON</button>
        <button class="control-btn" id="resetView">Reset View</button>
        <button class="control-btn" id="topView">Top View</button>
        <button class="control-btn" id="sideView">Side View</button>
      </div>
    </div>
  </section>

  <section class="section" id="modules">
    <div class="section-inner">
      <h2>Hub Modules</h2>
      <p class="section-subtitle">Everything you need for your home gym in one centralized hub.</p>
      <div class="module-grid">
        <div class="module-card">
          <h3>Gym Planner</h3>
          <p>Design your home gym at scale with precise placement tools.</p>
          <button class="btn subtle" data-target="builder.html">Launch Planner</button>
        </div>
        <div class="module-card">
          <h3>Marketplace</h3>
          <p>Browse equipment and see how it fits in 3D before you buy.</p>
          <button class="btn subtle" data-target="marketplace.html">Explore Marketplace</button>
        </div>
        <div class="module-card">
          <h3>Community</h3>
          <p>Share setups, get feedback, and learn from other fitness enthusiasts.</p>
          <button class="btn subtle" data-target="threads.html">Open Community</button>
        </div>
      </div>
    </div>
  </section>

  <section class="home-roadmap">
    <div class="home-roadmap-divider"></div>
    <div class="home-roadmap-container">
      <header class="home-roadmap-header">
        <h2>Development Progress</h2>
        <p>
          Hover for details, click to see selected progress with smooth animations.
        </p>
      </header>

      <div class="home-roadmap-grid">
        <div class="home-roadmap-card completed" data-title="Core Platform" data-percent="100" data-color="linear-gradient(90deg, #ff6b35, #ff8c42)">
          <span class="status">Completed</span>
          <h3>Core Platform</h3>
          <p class="short-text">
            Responsive layout, mobile & touch support, performance improvements.
          </p>
          <p class="extra-text">
            Everything needed for a solid foundation: smooth scroll, clean spacing,
            overflow prevention, typography, and base styles.
          </p>
        </div>

        <div class="home-roadmap-card active" data-title="Home Gym Builder" data-percent="75" data-color="linear-gradient(90deg, #ff8c42, #ffaa80)">
          <span class="status">In Progress</span>
          <h3>Home Gym Builder</h3>
          <p class="short-text">
            Drag & drop equipment, snapping grid, locking, and mobile-first interactions.
          </p>
          <p class="extra-text">
            Users can place equipment freely, snap items to a grid, lock them,
            and adjust spacing. Fully optimized for desktop and touch devices.
          </p>
        </div>

        <div class="home-roadmap-card upcoming" data-title="Save & Share Layouts" data-percent="50" data-color="linear-gradient(90deg, #ffaa80, #ffd4b3)">
          <span class="status">Up Next</span>
          <h3>Save & Share Layouts</h3>
          <p class="short-text">
            Save gym designs, reload later, and share layouts with others.
          </p>
          <p class="extra-text">
            Persist layouts, reload anytime, and share with friends or social media.
            Optional comments or tags can be added for organization.
          </p>
        </div>
      </div>

      <a href="timeline.html" class="home-roadmap-link">
        View Full Roadmap →
      </a>
    </div>

    <div class="roadmap-modal">
      <div class="roadmap-modal-content">
        <button class="roadmap-modal-close">×</button>
        <h2 class="roadmap-modal-title"></h2>
        <div class="roadmap-modal-body"></div>
      </div>
    </div>
  </section>

  <section class="section about" id="about">
    <div class="section-inner narrow">
      <h2>About HomeGymHub</h2>
      <p>
        HomeGymHub centralises planning, shopping, and community engagement for home gyms.
        Everything you need to design, purchase, and discuss your gym setup is in one place.
        Anything from designing a home gym, to meeting new people, HomeGymHub offers it all.
        Constantly evolving, ascending, and collaborating on new ideas.
      </p>
      <p>
        Professional, clean design with intuitive tools lets you focus on building your ideal home gym.
      </p>
    </div>
  </section>

  <footer class="footer">
    © 2026 HomeGymHub - Building the Future of Home Fitness
  </footer>

  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js@2";
    
    const supabase = createClient(
      "https://nqomiajgtmxxsupjgvvu.supabase.co",
      "sb_publishable_b8tpSFMffPkoDRqehct7nQ_g5HjWpxA"
    );
    
    const loginBtn = document.getElementById("loginBtn");
    const logoutBtn = document.getElementById("logoutBtn");
    const accountBtn = document.getElementById("accountBtn");

    loginBtn?.addEventListener("click", () => {
  window.location.href = "auth.html";
});

accountBtn?.addEventListener("click", () => {
  window.location.href = "account.html"; // change to your actual account page
});

logoutBtn?.addEventListener("click", async () => {
  await supabase.auth.signOut();
});
    
    loginBtn?.addEventListener("click", () => {
      window.location.href = "auth.html";
    });
    
    logoutBtn?.addEventListener("click", async () => {
      await supabase.auth.signOut();
    });
    
    supabase.auth.onAuthStateChange((event, session) => {
      if (session?.user) {
        loginBtn.style.display = "none";
        logoutBtn.style.display = "inline-block";
        accountBtn.style.display = "inline-block";
      } else {
        loginBtn.style.display = "inline-block";
        logoutBtn.style.display = "none";
        accountBtn.style.display = "none";
      }
    });
    
    const { data: { session } } = await supabase.auth.getSession();
    if (session?.user) {
      loginBtn.style.display = "none";
      logoutBtn.style.display = "inline-block";
      accountBtn.style.display = "inline-block";
    }
  </script>

  <script>
    // Particle system
    const particlesContainer = document.getElementById('particles');
    for(let i = 0; i < 40; i++) {
      const p = document.createElement('div');
      p.className = 'particle';
      p.style.left = Math.random() * 100 + '%';
      p.style.animationDuration = (Math.random() * 12 + 8) + 's';
      p.style.animationDelay = Math.random() * 5 + 's';
      p.style.setProperty('--drift', (Math.random() * 200 - 100) + 'px');
      particlesContainer.appendChild(p);
    }

    // Navbar scroll effect
    const nav = document.querySelector('.nav');
    window.addEventListener('scroll', () => {
      if(window.scrollY > 50) {
        nav.classList.add('scrolled');
      } else {
        nav.classList.remove('scrolled');
      }
    });

    // Module cards animation
    const moduleCards = document.querySelectorAll(".module-card");
    const observer = new IntersectionObserver(entries => {
      entries.forEach((entry, i) => {
        if(entry.isIntersecting){
          setTimeout(() => {
            entry.target.classList.add("animate-card");
          }, i * 150);
        }
      });
    }, {threshold: 0.2});

    moduleCards.forEach(card => observer.observe(card));

    // Roadmap scroll reveal
    const homeRoadmapCards = document.querySelectorAll('.home-roadmap-card');
    const revealHomeRoadmap = () => {
      homeRoadmapCards.forEach((card, i) => {
        const top = card.getBoundingClientRect().top;
        if(top < window.innerHeight - 120) {
          setTimeout(() => card.classList.add('show'), i * 120);
        }
      });
    };
    window.addEventListener('scroll', revealHomeRoadmap);
    revealHomeRoadmap();

    // Modal with progress bar
    const modal = document.querySelector('.roadmap-modal');
    const modalTitle = modal.querySelector('.roadmap-modal-title');
    const modalBody = modal.querySelector('.roadmap-modal-body');
    const modalClose = modal.querySelector('.roadmap-modal-close');

    homeRoadmapCards.forEach(card => {
      card.addEventListener('click', () => {
        const title = card.getAttribute('data-title');
        const percent = card.getAttribute('data-percent');
        const color = card.getAttribute('data-color');

        modalTitle.textContent = title;

        modalBody.innerHTML = `
          <div class="progress-container">
            <span class="progress-label">${title} - ${percent}% Complete</span>
            <div class="progress-bar">
              <div class="progress-fill" style="background:${color}; width:0;"></div>
            </div>
          </div>
        `;
        modal.classList.add('active');

        const fill = modalBody.querySelector('.progress-fill');
        setTimeout(() => {
          fill.style.width = percent + '%';
          fill.classList.add('pulse');
        }, 100);
      });
    });

    modalClose.addEventListener('click', () => modal.classList.remove('active'));
    modal.addEventListener('click', e => { if(e.target === modal) modal.classList.remove('active'); });

    // 3D Model Controls
    const modelViewer = document.getElementById('gymModel');
    const toggleBtn = document.getElementById('toggleRotation');
    const resetBtn = document.getElementById('resetView');
    const topViewBtn = document.getElementById('topView');
    const sideViewBtn = document.getElementById('sideView');
    
    let rotating = true;
    
    toggleBtn.addEventListener('click', () => {
      rotating = !rotating;
      if(rotating) {
        modelViewer.setAttribute('auto-rotate', '');
        toggleBtn.textContent = 'Auto Rotate: ON';
        toggleBtn.classList.add('active');
      } else {
        modelViewer.removeAttribute('auto-rotate');
        toggleBtn.textContent = 'Auto Rotate: OFF';
        toggleBtn.classList.remove('active');
      }
    });
    
    resetBtn.addEventListener('click', () => {
      modelViewer.resetTurntableRotation();
      modelViewer.cameraOrbit = 'auto auto auto';
      if(!rotating) {
        modelViewer.setAttribute('auto-rotate', '');
        rotating = true;
        toggleBtn.textContent = 'Auto Rotate: ON';
        toggleBtn.classList.add('active');
      }
    });
    
    topViewBtn.addEventListener('click', () => {
      modelViewer.cameraOrbit = '0deg 90deg 18m';
      if(rotating) {
        modelViewer.removeAttribute('auto-rotate');
        rotating = false;
        toggleBtn.textContent = 'Auto Rotate: OFF';
        toggleBtn.classList.remove('active');
      }
    });

    sideViewBtn.addEventListener('click', () => {
      modelViewer.cameraOrbit = '90deg 75deg 20m';
      if(rotating) {
        modelViewer.removeAttribute('auto-rotate');
        rotating = false;
        toggleBtn.textContent = 'Auto Rotate: OFF';
        toggleBtn.classList.remove('active');
      }
    });

    // Button navigation WITHOUT fade (to prevent white flash)
    const buttons = document.querySelectorAll(".btn[data-target]");
    buttons.forEach(btn => {
      btn.addEventListener("click", () => {
        const target = btn.getAttribute("data-target");
        window.location.href = target;
      });
    });
  </script>
</body>
</html>